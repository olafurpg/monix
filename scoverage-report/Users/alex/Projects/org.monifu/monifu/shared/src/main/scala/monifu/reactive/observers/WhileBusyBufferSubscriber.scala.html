<html>
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title id="title">
          /Users/alex/Projects/org.monifu/monifu/shared/src/main/scala/monifu/reactive/observers/WhileBusyBufferSubscriber.scala.html
        </title>
        <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css"/>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.18.3/addons/pager/jquery.tablesorter.pager.min.js"></script>
        <style>
          table.codegrid { font-family: monospace; font-size: 12px; width: auto!important; }table.statementlist { width: auto!important; font-size: 13px; } table.codegrid td { padding: 0!important; border: 0!important } table td.linenumber { width: 40px!important; } 
        </style>
      </head>
      <body style="font-family: monospace;">
        <ul class="nav nav-tabs">
          <li>
            <a href="#codegrid" data-toggle="tab">Codegrid</a>
          </li>
          <li>
            <a href="#statementlist" data-toggle="tab">Statement List</a>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane active" id="codegrid">
            <pre style='font-size: 12pt; font-family: courier;'>1 <span style=''>/*
</span>2 <span style=''> * Copyright (c) 2014-2015 Alexandru Nedelcu
</span>3 <span style=''> *
</span>4 <span style=''> * Licensed under the Apache License, Version 2.0 (the "License");
</span>5 <span style=''> * you may not use this file except in compliance with the License.
</span>6 <span style=''> * You may obtain a copy of the License at
</span>7 <span style=''> *
</span>8 <span style=''> *     http://www.apache.org/licenses/LICENSE-2.0
</span>9 <span style=''> *
</span>10 <span style=''> * Unless required by applicable law or agreed to in writing, software
</span>11 <span style=''> * distributed under the License is distributed on an "AS IS" BASIS,
</span>12 <span style=''> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
</span>13 <span style=''> * See the License for the specific language governing permissions and
</span>14 <span style=''> * limitations under the License.
</span>15 <span style=''> */
</span>16 <span style=''>
</span>17 <span style=''>package monifu.reactive.observers
</span>18 <span style=''>
</span>19 <span style=''>import monifu.collection.mutable.ConcurrentQueue
</span>20 <span style=''>import monifu.concurrent.Scheduler
</span>21 <span style=''>import monifu.reactive.Ack.{Continue, Cancel}
</span>22 <span style=''>import monifu.reactive.{Ack, Observer}
</span>23 <span style=''>
</span>24 <span style=''>import scala.annotation.tailrec
</span>25 <span style=''>import scala.collection.mutable
</span>26 <span style=''>import scala.concurrent.{Future, Promise}
</span>27 <span style=''>import scala.util.Failure
</span>28 <span style=''>import scala.util.control.NonFatal
</span>29 <span style=''>
</span>30 <span style=''>/**
</span>31 <span style=''> * Represents a [[BufferedSubscriber]] that buffers incoming events
</span>32 <span style=''> * up to a maximum buffer size, then when the downstream observer it
</span>33 <span style=''> * emits all of the buffered events as a single chunk. If the buffer is full,
</span>34 <span style=''> * then it starts don't back-pressure.
</span>35 <span style=''> *
</span>36 <span style=''> * Used in the implementation of
</span>37 <span style=''> * [[monifu.reactive.Observable.whileBusyBufferEvents]].
</span>38 <span style=''> */
</span>39 <span style=''>final class WhileBusyBufferSubscriber[-T] private
</span>40 <span style=''>    (downstream: Observer[Seq[T]], bufferSize: Int)(implicit val scheduler: Scheduler)
</span>41 <span style=''>  extends BufferedSubscriber[T] { self =>
</span>42 <span style=''>
</span>43 <span style=''>  </span><span style='background: #AEF1AE'>require(bufferSize > 0, </span><span style='background: #F0ADAD'>"bufferSize must be a strictly positive number"</span><span style='background: #AEF1AE'>)</span><span style=''>
</span>44 <span style=''>
</span>45 <span style=''>  private[this] val queue = </span><span style='background: #AEF1AE'>ConcurrentQueue.empty[T]</span><span style=''>
</span>46 <span style=''>  // to be modified only in onError, before upstreamIsComplete
</span>47 <span style=''>  private[this] var errorThrown: Throwable = </span><span style='background: #AEF1AE'>null</span><span style=''>
</span>48 <span style=''>  // to be modified only in onError / onComplete
</span>49 <span style=''>  @volatile private[this] var upstreamIsComplete = </span><span style='background: #AEF1AE'>false</span><span style=''>
</span>50 <span style=''>  // to be modified only by consumer
</span>51 <span style=''>  @volatile private[this] var downstreamIsDone = </span><span style='background: #AEF1AE'>false</span><span style=''>
</span>52 <span style=''>
</span>53 <span style=''>  // for enforcing non-concurrent updates and back-pressure
</span>54 <span style=''>  // all access must be synchronized
</span>55 <span style=''>  private[this] val lock = </span><span style='background: #AEF1AE'>new AnyRef</span><span style=''>
</span>56 <span style=''>  private[this] var itemsToPush = </span><span style='background: #AEF1AE'>0</span><span style=''>
</span>57 <span style=''>  private[this] var nextAckPromise = </span><span style='background: #AEF1AE'>Promise[Ack]()</span><span style=''>
</span>58 <span style=''>  private[this] var appliesBackPressure = </span><span style='background: #AEF1AE'>false</span><span style=''>
</span>59 <span style=''>
</span>60 <span style=''>  val observer: Observer[T] = </span><span style='background: #AEF1AE'>new</span><span style=''> Observer[T] {
</span>61 <span style=''>    def onNext(elem: T): Future[Ack] = </span><span style='background: #AEF1AE'>lock.synchronized {
</span>62 <span style=''></span><span style='background: #AEF1AE'>      if (!upstreamIsComplete && !downstreamIsDone) {
</span>63 <span style=''></span><span style='background: #AEF1AE'>        try {
</span>64 <span style=''></span><span style='background: #AEF1AE'>          queue.offer(elem)
</span>65 <span style=''></span><span style='background: #AEF1AE'>          pushToConsumer()
</span>66 <span style=''></span><span style='background: #AEF1AE'>        }
</span>67 <span style=''></span><span style='background: #AEF1AE'>        catch {
</span>68 <span style=''></span><span style='background: #AEF1AE'>          case NonFatal(ex) =>
</span>69 <span style=''></span><span style='background: #AEF1AE'>            </span><span style='background: #F0ADAD'>onError(ex)</span><span style='background: #AEF1AE'>
</span>70 <span style=''></span><span style='background: #AEF1AE'>            </span><span style='background: #F0ADAD'>Cancel</span><span style='background: #AEF1AE'>
</span>71 <span style=''></span><span style='background: #AEF1AE'>        }
</span>72 <span style=''></span><span style='background: #AEF1AE'>      }
</span>73 <span style=''></span><span style='background: #AEF1AE'>      else {
</span>74 <span style=''></span><span style='background: #AEF1AE'>        Cancel
</span>75 <span style=''></span><span style='background: #AEF1AE'>      }
</span>76 <span style=''></span><span style='background: #AEF1AE'>    }</span><span style=''>
</span>77 <span style=''>
</span>78 <span style=''>    def onError(ex: Throwable) = </span><span style='background: #AEF1AE'>lock.synchronized {
</span>79 <span style=''></span><span style='background: #AEF1AE'>      if (!upstreamIsComplete && !downstreamIsDone) {
</span>80 <span style=''></span><span style='background: #AEF1AE'>        errorThrown = ex
</span>81 <span style=''></span><span style='background: #AEF1AE'>        upstreamIsComplete = true
</span>82 <span style=''></span><span style='background: #AEF1AE'>        pushToConsumer()
</span>83 <span style=''></span><span style='background: #AEF1AE'>      }
</span>84 <span style=''></span><span style='background: #AEF1AE'>    }</span><span style=''>
</span>85 <span style=''>
</span>86 <span style=''>    def onComplete() = </span><span style='background: #AEF1AE'>lock.synchronized {
</span>87 <span style=''></span><span style='background: #AEF1AE'>      if (!upstreamIsComplete && !downstreamIsDone) {
</span>88 <span style=''></span><span style='background: #AEF1AE'>        upstreamIsComplete = true
</span>89 <span style=''></span><span style='background: #AEF1AE'>        pushToConsumer()
</span>90 <span style=''></span><span style='background: #AEF1AE'>      }
</span>91 <span style=''></span><span style='background: #AEF1AE'>    }</span><span style=''>
</span>92 <span style=''>  }
</span>93 <span style=''>
</span>94 <span style=''>  private[this] def pushToConsumer(): Future[Ack] = {
</span>95 <span style=''>    if (</span><span style='background: #AEF1AE'>itemsToPush == 0</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>96 <span style=''></span><span style='background: #AEF1AE'>      nextAckPromise = Promise[Ack]()
</span>97 <span style=''></span><span style='background: #AEF1AE'>      appliesBackPressure = false
</span>98 <span style=''></span><span style='background: #AEF1AE'>      itemsToPush += 1
</span>99 <span style=''></span><span style='background: #AEF1AE'>
</span>100 <span style=''></span><span style='background: #AEF1AE'>      scheduler.execute(new Runnable {
</span>101 <span style=''></span><span style='background: #AEF1AE'>        def run() = fastLoop(0)
</span>102 <span style=''></span><span style='background: #AEF1AE'>      })
</span>103 <span style=''></span><span style='background: #AEF1AE'>
</span>104 <span style=''></span><span style='background: #AEF1AE'>      Continue
</span>105 <span style=''></span><span style='background: #AEF1AE'>    }</span><span style=''>
</span>106 <span style=''>    else </span><span style='background: #AEF1AE'>if (appliesBackPressure) </span><span style='background: #F0ADAD'>{
</span>107 <span style=''></span><span style='background: #F0ADAD'>      itemsToPush += 1
</span>108 <span style=''></span><span style='background: #F0ADAD'>      nextAckPromise.future
</span>109 <span style=''></span><span style='background: #F0ADAD'>    }</span><span style='background: #AEF1AE'>
</span>110 <span style=''></span><span style='background: #AEF1AE'>    else if (itemsToPush >= bufferSize) {
</span>111 <span style=''></span><span style='background: #AEF1AE'>      appliesBackPressure = true
</span>112 <span style=''></span><span style='background: #AEF1AE'>      itemsToPush += 1
</span>113 <span style=''></span><span style='background: #AEF1AE'>      nextAckPromise.future
</span>114 <span style=''></span><span style='background: #AEF1AE'>    }
</span>115 <span style=''></span><span style='background: #AEF1AE'>    else {
</span>116 <span style=''></span><span style='background: #AEF1AE'>      itemsToPush += 1
</span>117 <span style=''></span><span style='background: #AEF1AE'>      Continue
</span>118 <span style=''></span><span style='background: #AEF1AE'>    }</span><span style=''>
</span>119 <span style=''>  }
</span>120 <span style=''>
</span>121 <span style=''>  private[this] def rescheduled(processed: Int): Unit = {
</span>122 <span style=''>    </span><span style='background: #AEF1AE'>fastLoop(processed)</span><span style=''>
</span>123 <span style=''>  }
</span>124 <span style=''>
</span>125 <span style=''>  @tailrec
</span>126 <span style=''>  private[this] def fastLoop(processed: Int): Unit = {
</span>127 <span style=''>    if (</span><span style='background: #AEF1AE'>!downstreamIsDone</span><span style=''>) </span><span style='background: #AEF1AE'>{
</span>128 <span style=''></span><span style='background: #AEF1AE'>      val hasError = errorThrown ne null
</span>129 <span style=''></span><span style='background: #AEF1AE'>      val (next, processingNow) = {
</span>130 <span style=''></span><span style='background: #AEF1AE'>        val buffer = mutable.Queue.empty[T]
</span>131 <span style=''></span><span style='background: #AEF1AE'>        var elem: T = queue.poll()
</span>132 <span style=''></span><span style='background: #AEF1AE'>        var count = 0
</span>133 <span style=''></span><span style='background: #AEF1AE'>
</span>134 <span style=''></span><span style='background: #AEF1AE'>        while (elem != null) {
</span>135 <span style=''></span><span style='background: #AEF1AE'>          count += 1
</span>136 <span style=''></span><span style='background: #AEF1AE'>          buffer.enqueue(elem)
</span>137 <span style=''></span><span style='background: #AEF1AE'>          elem = queue.poll()
</span>138 <span style=''></span><span style='background: #AEF1AE'>        }
</span>139 <span style=''></span><span style='background: #AEF1AE'>
</span>140 <span style=''></span><span style='background: #AEF1AE'>        (buffer, count)
</span>141 <span style=''></span><span style='background: #AEF1AE'>      }
</span>142 <span style=''></span><span style='background: #AEF1AE'>
</span>143 <span style=''></span><span style='background: #AEF1AE'>      if (next.nonEmpty)
</span>144 <span style=''></span><span style='background: #AEF1AE'>        downstream.onNext(next) match {
</span>145 <span style=''></span><span style='background: #AEF1AE'>          case sync if sync.isCompleted =>
</span>146 <span style=''></span><span style='background: #AEF1AE'>            sync match {
</span>147 <span style=''></span><span style='background: #AEF1AE'>              case continue if continue == Continue || continue.value.get == Continue.IsSuccess =>
</span>148 <span style=''></span><span style='background: #AEF1AE'>                // process next
</span>149 <span style=''></span><span style='background: #AEF1AE'>                fastLoop(processed + processingNow)
</span>150 <span style=''></span><span style='background: #AEF1AE'>
</span>151 <span style=''></span><span style='background: #AEF1AE'>              case done if </span><span style='background: #F0ADAD'>done == Cancel || done.value.get == Cancel.IsSuccess</span><span style='background: #AEF1AE'> =>
</span>152 <span style=''></span><span style='background: #AEF1AE'>                // ending loop
</span>153 <span style=''></span><span style='background: #AEF1AE'>                downstreamIsDone = </span><span style='background: #F0ADAD'>true</span><span style='background: #AEF1AE'>
</span>154 <span style=''></span><span style='background: #AEF1AE'>                </span><span style='background: #F0ADAD'>lock.synchronized {
</span>155 <span style=''></span><span style='background: #F0ADAD'>                  itemsToPush = 0
</span>156 <span style=''></span><span style='background: #F0ADAD'>                  nextAckPromise.success(Cancel)
</span>157 <span style=''></span><span style='background: #F0ADAD'>                }</span><span style='background: #AEF1AE'>
</span>158 <span style=''></span><span style='background: #AEF1AE'>
</span>159 <span style=''></span><span style='background: #AEF1AE'>              case error if </span><span style='background: #F0ADAD'>error.value.get.isFailure</span><span style='background: #AEF1AE'> =>
</span>160 <span style=''></span><span style='background: #AEF1AE'>                // ending loop
</span>161 <span style=''></span><span style='background: #AEF1AE'>                downstreamIsDone = </span><span style='background: #F0ADAD'>true</span><span style='background: #AEF1AE'>
</span>162 <span style=''></span><span style='background: #AEF1AE'>                try </span><span style='background: #F0ADAD'>downstream.onError(error.value.get.failed.get)</span><span style='background: #AEF1AE'> finally
</span>163 <span style=''></span><span style='background: #AEF1AE'>                  </span><span style='background: #F0ADAD'>lock.synchronized {
</span>164 <span style=''></span><span style='background: #F0ADAD'>                    itemsToPush = 0
</span>165 <span style=''></span><span style='background: #F0ADAD'>                    nextAckPromise.success(Cancel)
</span>166 <span style=''></span><span style='background: #F0ADAD'>                  }</span><span style='background: #AEF1AE'>
</span>167 <span style=''></span><span style='background: #AEF1AE'>            }
</span>168 <span style=''></span><span style='background: #AEF1AE'>
</span>169 <span style=''></span><span style='background: #AEF1AE'>          case async =>
</span>170 <span style=''></span><span style='background: #AEF1AE'>            async.onComplete {
</span>171 <span style=''></span><span style='background: #AEF1AE'>              case Continue.IsSuccess =>
</span>172 <span style=''></span><span style='background: #AEF1AE'>                // re-run loop (in different thread)
</span>173 <span style=''></span><span style='background: #AEF1AE'>                rescheduled(processed + processingNow)
</span>174 <span style=''></span><span style='background: #AEF1AE'>
</span>175 <span style=''></span><span style='background: #AEF1AE'>              case Cancel.IsSuccess =>
</span>176 <span style=''></span><span style='background: #AEF1AE'>                // ending loop
</span>177 <span style=''></span><span style='background: #AEF1AE'>                downstreamIsDone = </span><span style='background: #F0ADAD'>true</span><span style='background: #AEF1AE'>
</span>178 <span style=''></span><span style='background: #AEF1AE'>                </span><span style='background: #F0ADAD'>lock.synchronized {
</span>179 <span style=''></span><span style='background: #F0ADAD'>                  itemsToPush = 0
</span>180 <span style=''></span><span style='background: #F0ADAD'>                  nextAckPromise.success(Cancel)
</span>181 <span style=''></span><span style='background: #F0ADAD'>                }</span><span style='background: #AEF1AE'>
</span>182 <span style=''></span><span style='background: #AEF1AE'>
</span>183 <span style=''></span><span style='background: #AEF1AE'>              case Failure(ex) =>
</span>184 <span style=''></span><span style='background: #AEF1AE'>                // ending loop
</span>185 <span style=''></span><span style='background: #AEF1AE'>                downstreamIsDone = </span><span style='background: #F0ADAD'>true</span><span style='background: #AEF1AE'>
</span>186 <span style=''></span><span style='background: #AEF1AE'>                try </span><span style='background: #F0ADAD'>downstream.onError(ex)</span><span style='background: #AEF1AE'> finally
</span>187 <span style=''></span><span style='background: #AEF1AE'>                  </span><span style='background: #F0ADAD'>lock.synchronized {
</span>188 <span style=''></span><span style='background: #F0ADAD'>                    itemsToPush = 0
</span>189 <span style=''></span><span style='background: #F0ADAD'>                    nextAckPromise.success(Cancel)
</span>190 <span style=''></span><span style='background: #F0ADAD'>                  }</span><span style='background: #AEF1AE'>
</span>191 <span style=''></span><span style='background: #AEF1AE'>
</span>192 <span style=''></span><span style='background: #AEF1AE'>              case other =>
</span>193 <span style=''></span><span style='background: #AEF1AE'>                // never happens, but to appease Scala's compiler
</span>194 <span style=''></span><span style='background: #AEF1AE'>                downstreamIsDone = </span><span style='background: #F0ADAD'>true</span><span style='background: #AEF1AE'>
</span>195 <span style=''></span><span style='background: #AEF1AE'>                try </span><span style='background: #F0ADAD'>downstream.onError(new MatchError(s"$other"))</span><span style='background: #AEF1AE'> finally
</span>196 <span style=''></span><span style='background: #AEF1AE'>                  </span><span style='background: #F0ADAD'>lock.synchronized {
</span>197 <span style=''></span><span style='background: #F0ADAD'>                    itemsToPush = 0
</span>198 <span style=''></span><span style='background: #F0ADAD'>                    nextAckPromise.success(Cancel)
</span>199 <span style=''></span><span style='background: #F0ADAD'>                  }</span><span style='background: #AEF1AE'>
</span>200 <span style=''></span><span style='background: #AEF1AE'>            }
</span>201 <span style=''></span><span style='background: #AEF1AE'>        }
</span>202 <span style=''></span><span style='background: #AEF1AE'>      else if (upstreamIsComplete || hasError) {
</span>203 <span style=''></span><span style='background: #AEF1AE'>        // Race-condition check, but if upstreamIsComplete=true is visible, then the queue should be fully published
</span>204 <span style=''></span><span style='background: #AEF1AE'>        // because there's a clear happens-before relationship between queue.offer() and upstreamIsComplete=true
</span>205 <span style=''></span><span style='background: #AEF1AE'>        // NOTE: errors have priority, so in case of an error seen, then the loop is stopped
</span>206 <span style=''></span><span style='background: #AEF1AE'>        if (!queue.isEmpty) {
</span>207 <span style=''></span><span style='background: #AEF1AE'>          </span><span style='background: #F0ADAD'>fastLoop(processed)</span><span style='background: #AEF1AE'> // re-run loop
</span>208 <span style=''></span><span style='background: #AEF1AE'>        }
</span>209 <span style=''></span><span style='background: #AEF1AE'>        else {
</span>210 <span style=''></span><span style='background: #AEF1AE'>          // ending loop
</span>211 <span style=''></span><span style='background: #AEF1AE'>          downstreamIsDone = true
</span>212 <span style=''></span><span style='background: #AEF1AE'>          try {
</span>213 <span style=''></span><span style='background: #AEF1AE'>            if (errorThrown ne null)
</span>214 <span style=''></span><span style='background: #AEF1AE'>              downstream.onError(errorThrown)
</span>215 <span style=''></span><span style='background: #AEF1AE'>            else
</span>216 <span style=''></span><span style='background: #AEF1AE'>              downstream.onComplete()
</span>217 <span style=''></span><span style='background: #AEF1AE'>          }
</span>218 <span style=''></span><span style='background: #AEF1AE'>          finally lock.synchronized {
</span>219 <span style=''></span><span style='background: #AEF1AE'>            queue.clear() // for GC purposes
</span>220 <span style=''></span><span style='background: #AEF1AE'>            itemsToPush = 0
</span>221 <span style=''></span><span style='background: #AEF1AE'>            nextAckPromise.success(Cancel)
</span>222 <span style=''></span><span style='background: #AEF1AE'>          }
</span>223 <span style=''></span><span style='background: #AEF1AE'>        }
</span>224 <span style=''></span><span style='background: #AEF1AE'>      }
</span>225 <span style=''></span><span style='background: #AEF1AE'>      else {
</span>226 <span style=''></span><span style='background: #AEF1AE'>        val remaining = lock.synchronized {
</span>227 <span style=''></span><span style='background: #AEF1AE'>          itemsToPush -= processed
</span>228 <span style=''></span><span style='background: #AEF1AE'>          if (itemsToPush <= 0) // this really has to be LESS-or-equal
</span>229 <span style=''></span><span style='background: #AEF1AE'>            nextAckPromise.success(Continue)
</span>230 <span style=''></span><span style='background: #AEF1AE'>          itemsToPush
</span>231 <span style=''></span><span style='background: #AEF1AE'>        }
</span>232 <span style=''></span><span style='background: #AEF1AE'>
</span>233 <span style=''></span><span style='background: #AEF1AE'>        // if the queue is non-empty (i.e. concurrent modifications might have happened)
</span>234 <span style=''></span><span style='background: #AEF1AE'>        // then start all over again
</span>235 <span style=''></span><span style='background: #AEF1AE'>        if (remaining > 0) </span><span style='background: #F0ADAD'>fastLoop(0)</span><span style='background: #AEF1AE'>
</span>236 <span style=''></span><span style='background: #AEF1AE'>      }
</span>237 <span style=''></span><span style='background: #AEF1AE'>    }</span><span style=''>
</span>238 <span style=''>  }
</span>239 <span style=''>}
</span>240 <span style=''>
</span>241 <span style=''>object WhileBusyBufferSubscriber {
</span>242 <span style=''>  /**
</span>243 <span style=''>   * Builds a [[WhileBusyBufferSubscriber]].
</span>244 <span style=''>   */
</span>245 <span style=''>  def apply[T](downstream: Observer[Seq[T]], bufferSize: Int)
</span>246 <span style=''>      (implicit s: Scheduler): BufferedSubscriber[T] = {
</span>247 <span style=''>    
</span>248 <span style=''>    </span><span style='background: #AEF1AE'>new WhileBusyBufferSubscriber[T](downstream, bufferSize)</span><span style=''>
</span>249 <span style=''>  } 
</span>250 <span style=''>}
</span></pre>
          </div>
          <div class="tab-pane" id="statementlist">
            <table cellspacing="0" cellpadding="0" class="table statementlist">
      <tr>
        <th>Line</th>
        <th>Stmt Id</th>
        <th>Pos</th>
        <th>Tree</th>
        <th>Symbol</th>
        <th>Code</th>
      </tr><tr>
        <td>
          43
        </td>
        <td>
          3815
        </td>
        <td>
          1521
          -
          1593
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Predef.require
        </td>
        <td style="background: #AEF1AE">
          scala.this.Predef.require(WhileBusyBufferSubscriber.this.bufferSize.&gt;(0), &quot;bufferSize must be a strictly positive number&quot;)
        </td>
      </tr><tr>
        <td>
          43
        </td>
        <td>
          3814
        </td>
        <td>
          1545
          -
          1592
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          &quot;bufferSize must be a strictly positive number&quot;
        </td>
      </tr><tr>
        <td>
          43
        </td>
        <td>
          3813
        </td>
        <td>
          1529
          -
          1543
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&gt;
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.bufferSize.&gt;(0)
        </td>
      </tr><tr>
        <td>
          45
        </td>
        <td>
          3816
        </td>
        <td>
          1623
          -
          1647
        </td>
        <td>
          TypeApply
        </td>
        <td>
          scala.collection.generic.GenericCompanion.empty
        </td>
        <td style="background: #AEF1AE">
          monifu.collection.mutable.ConcurrentQueue.empty[T]
        </td>
      </tr><tr>
        <td>
          47
        </td>
        <td>
          3817
        </td>
        <td>
          1756
          -
          1760
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          null
        </td>
      </tr><tr>
        <td>
          49
        </td>
        <td>
          3818
        </td>
        <td>
          1861
          -
          1866
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          false
        </td>
      </tr><tr>
        <td>
          51
        </td>
        <td>
          3819
        </td>
        <td>
          1953
          -
          1958
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          false
        </td>
      </tr><tr>
        <td>
          55
        </td>
        <td>
          3820
        </td>
        <td>
          2084
          -
          2094
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.&lt;init&gt;
        </td>
        <td style="background: #AEF1AE">
          new scala.AnyRef()
        </td>
      </tr><tr>
        <td>
          56
        </td>
        <td>
          3821
        </td>
        <td>
          2129
          -
          2130
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          57
        </td>
        <td>
          3822
        </td>
        <td>
          2168
          -
          2182
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.concurrent.Promise.apply
        </td>
        <td style="background: #AEF1AE">
          scala.concurrent.Promise.apply[monifu.reactive.Ack]()
        </td>
      </tr><tr>
        <td>
          58
        </td>
        <td>
          3823
        </td>
        <td>
          2225
          -
          2230
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          false
        </td>
      </tr><tr>
        <td>
          60
        </td>
        <td>
          3853
        </td>
        <td>
          2262
          -
          2265
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.$anon.&lt;init&gt;
        </td>
        <td style="background: #AEF1AE">
          new $anon()
        </td>
      </tr><tr>
        <td>
          61
        </td>
        <td>
          3834
        </td>
        <td>
          2319
          -
          2621
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Future[monifu.reactive.Ack]](if (WhileBusyBufferSubscriber.this.upstreamIsComplete.unary_!.&amp;&amp;(WhileBusyBufferSubscriber.this.downstreamIsDone.unary_!))
  try {
    WhileBusyBufferSubscriber.this.queue.offer(elem);
    WhileBusyBufferSubscriber.this.pushToConsumer()
  } catch {
    case scala.util.control.NonFatal.unapply(&lt;unapply-selector&gt;) &lt;unapply&gt; ((ex @ _)) =&gt; {
      $anon.this.onError(ex);
      monifu.reactive.Ack.Cancel
    }
  }
else
  monifu.reactive.Ack.Cancel)
        </td>
      </tr><tr>
        <td>
          62
        </td>
        <td>
          3824
        </td>
        <td>
          2372
          -
          2389
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.downstreamIsDone.unary_!
        </td>
      </tr><tr>
        <td>
          62
        </td>
        <td>
          3825
        </td>
        <td>
          2349
          -
          2389
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.upstreamIsComplete.unary_!.&amp;&amp;(WhileBusyBufferSubscriber.this.downstreamIsDone.unary_!)
        </td>
      </tr><tr>
        <td>
          63
        </td>
        <td>
          3831
        </td>
        <td>
          2401
          -
          2571
        </td>
        <td>
          Try
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          try {
  WhileBusyBufferSubscriber.this.queue.offer(elem);
  WhileBusyBufferSubscriber.this.pushToConsumer()
} catch {
  case scala.util.control.NonFatal.unapply(&lt;unapply-selector&gt;) &lt;unapply&gt; ((ex @ _)) =&gt; {
    $anon.this.onError(ex);
    monifu.reactive.Ack.Cancel
  }
}
        </td>
      </tr><tr>
        <td>
          63
        </td>
        <td>
          3828
        </td>
        <td>
          2417
          -
          2461
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          {
  WhileBusyBufferSubscriber.this.queue.offer(elem);
  WhileBusyBufferSubscriber.this.pushToConsumer()
}
        </td>
      </tr><tr>
        <td>
          64
        </td>
        <td>
          3826
        </td>
        <td>
          2417
          -
          2434
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.collection.mutable.ConcurrentQueue.offer
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.queue.offer(elem)
        </td>
      </tr><tr>
        <td>
          65
        </td>
        <td>
          3827
        </td>
        <td>
          2445
          -
          2461
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.pushToConsumer
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.pushToConsumer()
        </td>
      </tr><tr>
        <td>
          69
        </td>
        <td>
          3829
        </td>
        <td>
          2531
          -
          2542
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.$anon.onError
        </td>
        <td style="background: #F0ADAD">
          $anon.this.onError(ex)
        </td>
      </tr><tr>
        <td>
          70
        </td>
        <td>
          3830
        </td>
        <td>
          2555
          -
          2561
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Cancel
        </td>
        <td style="background: #F0ADAD">
          monifu.reactive.Ack.Cancel
        </td>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          3833
        </td>
        <td>
          2601
          -
          2607
        </td>
        <td>
          Block
        </td>
        <td>
          monifu.reactive.Ack.Cancel
        </td>
        <td style="background: #AEF1AE">
          monifu.reactive.Ack.Cancel
        </td>
      </tr><tr>
        <td>
          74
        </td>
        <td>
          3832
        </td>
        <td>
          2601
          -
          2607
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Cancel
        </td>
        <td style="background: #AEF1AE">
          monifu.reactive.Ack.Cancel
        </td>
      </tr><tr>
        <td>
          78
        </td>
        <td>
          3842
        </td>
        <td>
          2656
          -
          2827
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.lock.synchronized[Any](if (WhileBusyBufferSubscriber.this.upstreamIsComplete.unary_!.&amp;&amp;(WhileBusyBufferSubscriber.this.downstreamIsDone.unary_!))
  {
    WhileBusyBufferSubscriber.this.errorThrown = ex;
    WhileBusyBufferSubscriber.this.upstreamIsComplete = true;
    WhileBusyBufferSubscriber.this.pushToConsumer()
  }
else
  ())
        </td>
      </tr><tr>
        <td>
          78
        </td>
        <td>
          3843
        </td>
        <td>
          2674
          -
          2674
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          79
        </td>
        <td>
          3839
        </td>
        <td>
          2728
          -
          2821
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          {
  WhileBusyBufferSubscriber.this.errorThrown = ex;
  WhileBusyBufferSubscriber.this.upstreamIsComplete = true;
  WhileBusyBufferSubscriber.this.pushToConsumer()
}
        </td>
      </tr><tr>
        <td>
          79
        </td>
        <td>
          3836
        </td>
        <td>
          2686
          -
          2726
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.upstreamIsComplete.unary_!.&amp;&amp;(WhileBusyBufferSubscriber.this.downstreamIsDone.unary_!)
        </td>
      </tr><tr>
        <td>
          79
        </td>
        <td>
          3835
        </td>
        <td>
          2709
          -
          2726
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.downstreamIsDone.unary_!
        </td>
      </tr><tr>
        <td>
          79
        </td>
        <td>
          3841
        </td>
        <td>
          2682
          -
          2682
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          79
        </td>
        <td>
          3840
        </td>
        <td>
          2682
          -
          2682
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          81
        </td>
        <td>
          3837
        </td>
        <td>
          2784
          -
          2788
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          true
        </td>
      </tr><tr>
        <td>
          82
        </td>
        <td>
          3838
        </td>
        <td>
          2797
          -
          2813
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.pushToConsumer
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.pushToConsumer()
        </td>
      </tr><tr>
        <td>
          86
        </td>
        <td>
          3851
        </td>
        <td>
          2852
          -
          2998
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.lock.synchronized[Any](if (WhileBusyBufferSubscriber.this.upstreamIsComplete.unary_!.&amp;&amp;(WhileBusyBufferSubscriber.this.downstreamIsDone.unary_!))
  {
    WhileBusyBufferSubscriber.this.upstreamIsComplete = true;
    WhileBusyBufferSubscriber.this.pushToConsumer()
  }
else
  ())
        </td>
      </tr><tr>
        <td>
          86
        </td>
        <td>
          3852
        </td>
        <td>
          2870
          -
          2870
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          87
        </td>
        <td>
          3845
        </td>
        <td>
          2882
          -
          2922
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.&amp;&amp;
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.upstreamIsComplete.unary_!.&amp;&amp;(WhileBusyBufferSubscriber.this.downstreamIsDone.unary_!)
        </td>
      </tr><tr>
        <td>
          87
        </td>
        <td>
          3848
        </td>
        <td>
          2924
          -
          2992
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          {
  WhileBusyBufferSubscriber.this.upstreamIsComplete = true;
  WhileBusyBufferSubscriber.this.pushToConsumer()
}
        </td>
      </tr><tr>
        <td>
          87
        </td>
        <td>
          3844
        </td>
        <td>
          2905
          -
          2922
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.downstreamIsDone.unary_!
        </td>
      </tr><tr>
        <td>
          87
        </td>
        <td>
          3850
        </td>
        <td>
          2878
          -
          2878
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          87
        </td>
        <td>
          3849
        </td>
        <td>
          2878
          -
          2878
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          88
        </td>
        <td>
          3846
        </td>
        <td>
          2955
          -
          2959
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          true
        </td>
      </tr><tr>
        <td>
          89
        </td>
        <td>
          3847
        </td>
        <td>
          2968
          -
          2984
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.pushToConsumer
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.pushToConsumer()
        </td>
      </tr><tr>
        <td>
          95
        </td>
        <td>
          3854
        </td>
        <td>
          3066
          -
          3082
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.==
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.itemsToPush.==(0)
        </td>
      </tr><tr>
        <td>
          95
        </td>
        <td>
          3862
        </td>
        <td>
          3084
          -
          3283
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          {
  WhileBusyBufferSubscriber.this.nextAckPromise = scala.concurrent.Promise.apply[monifu.reactive.Ack]();
  WhileBusyBufferSubscriber.this.appliesBackPressure = false;
  WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.+(1);
  WhileBusyBufferSubscriber.this.scheduler.execute({
    final class $anon extends Object with Runnable {
      def &lt;init&gt;(): &lt;$anon: Runnable&gt; = {
        $anon.super.&lt;init&gt;();
        ()
      };
      def run(): Unit = WhileBusyBufferSubscriber.this.fastLoop(0)
    };
    new $anon()
  });
  monifu.reactive.Ack.Continue
}
        </td>
      </tr><tr>
        <td>
          96
        </td>
        <td>
          3855
        </td>
        <td>
          3109
          -
          3123
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.concurrent.Promise.apply
        </td>
        <td style="background: #AEF1AE">
          scala.concurrent.Promise.apply[monifu.reactive.Ack]()
        </td>
      </tr><tr>
        <td>
          97
        </td>
        <td>
          3856
        </td>
        <td>
          3152
          -
          3157
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          false
        </td>
      </tr><tr>
        <td>
          98
        </td>
        <td>
          3857
        </td>
        <td>
          3164
          -
          3180
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.itemsToPush.+(1)
        </td>
      </tr><tr>
        <td>
          100
        </td>
        <td>
          3860
        </td>
        <td>
          3188
          -
          3261
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.concurrent.Scheduler.execute
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.scheduler.execute({
  final class $anon extends Object with Runnable {
    def &lt;init&gt;(): &lt;$anon: Runnable&gt; = {
      $anon.super.&lt;init&gt;();
      ()
    };
    def run(): Unit = WhileBusyBufferSubscriber.this.fastLoop(0)
  };
  new $anon()
})
        </td>
      </tr><tr>
        <td>
          100
        </td>
        <td>
          3859
        </td>
        <td>
          3206
          -
          3209
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.$anon.&lt;init&gt;
        </td>
        <td style="background: #AEF1AE">
          new $anon()
        </td>
      </tr><tr>
        <td>
          101
        </td>
        <td>
          3858
        </td>
        <td>
          3241
          -
          3252
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.fastLoop
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.fastLoop(0)
        </td>
      </tr><tr>
        <td>
          104
        </td>
        <td>
          3861
        </td>
        <td>
          3269
          -
          3277
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Continue
        </td>
        <td style="background: #AEF1AE">
          monifu.reactive.Ack.Continue
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          3863
        </td>
        <td>
          3297
          -
          3316
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.appliesBackPressure
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.appliesBackPressure
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          3866
        </td>
        <td>
          3318
          -
          3376
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.+(1);
  WhileBusyBufferSubscriber.this.nextAckPromise.future
}
        </td>
      </tr><tr>
        <td>
          106
        </td>
        <td>
          3877
        </td>
        <td>
          3293
          -
          3563
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          if (WhileBusyBufferSubscriber.this.appliesBackPressure)
  {
    WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.+(1);
    WhileBusyBufferSubscriber.this.nextAckPromise.future
  }
else
  if (WhileBusyBufferSubscriber.this.itemsToPush.&gt;=(WhileBusyBufferSubscriber.this.bufferSize))
    {
      WhileBusyBufferSubscriber.this.appliesBackPressure = true;
      WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.+(1);
      WhileBusyBufferSubscriber.this.nextAckPromise.future
    }
  else
    {
      WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.+(1);
      monifu.reactive.Ack.Continue
    }
        </td>
      </tr><tr>
        <td>
          107
        </td>
        <td>
          3864
        </td>
        <td>
          3326
          -
          3342
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.itemsToPush.+(1)
        </td>
      </tr><tr>
        <td>
          108
        </td>
        <td>
          3865
        </td>
        <td>
          3349
          -
          3370
        </td>
        <td>
          Select
        </td>
        <td>
          scala.concurrent.Promise.future
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.nextAckPromise.future
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          3872
        </td>
        <td>
          3417
          -
          3508
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          {
  WhileBusyBufferSubscriber.this.appliesBackPressure = true;
  WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.+(1);
  WhileBusyBufferSubscriber.this.nextAckPromise.future
}
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          3868
        </td>
        <td>
          3390
          -
          3415
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&gt;=
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.itemsToPush.&gt;=(WhileBusyBufferSubscriber.this.bufferSize)
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          3867
        </td>
        <td>
          3405
          -
          3415
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.bufferSize
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.bufferSize
        </td>
      </tr><tr>
        <td>
          110
        </td>
        <td>
          3876
        </td>
        <td>
          3386
          -
          3563
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          if (WhileBusyBufferSubscriber.this.itemsToPush.&gt;=(WhileBusyBufferSubscriber.this.bufferSize))
  {
    WhileBusyBufferSubscriber.this.appliesBackPressure = true;
    WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.+(1);
    WhileBusyBufferSubscriber.this.nextAckPromise.future
  }
else
  {
    WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.+(1);
    monifu.reactive.Ack.Continue
  }
        </td>
      </tr><tr>
        <td>
          111
        </td>
        <td>
          3869
        </td>
        <td>
          3447
          -
          3451
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          true
        </td>
      </tr><tr>
        <td>
          112
        </td>
        <td>
          3870
        </td>
        <td>
          3458
          -
          3474
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.itemsToPush.+(1)
        </td>
      </tr><tr>
        <td>
          113
        </td>
        <td>
          3871
        </td>
        <td>
          3481
          -
          3502
        </td>
        <td>
          Select
        </td>
        <td>
          scala.concurrent.Promise.future
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.nextAckPromise.future
        </td>
      </tr><tr>
        <td>
          115
        </td>
        <td>
          3875
        </td>
        <td>
          3518
          -
          3563
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          {
  WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.+(1);
  monifu.reactive.Ack.Continue
}
        </td>
      </tr><tr>
        <td>
          116
        </td>
        <td>
          3873
        </td>
        <td>
          3526
          -
          3542
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.itemsToPush.+(1)
        </td>
      </tr><tr>
        <td>
          117
        </td>
        <td>
          3874
        </td>
        <td>
          3549
          -
          3557
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Continue
        </td>
        <td style="background: #AEF1AE">
          monifu.reactive.Ack.Continue
        </td>
      </tr><tr>
        <td>
          122
        </td>
        <td>
          3878
        </td>
        <td>
          3631
          -
          3650
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.fastLoop
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.fastLoop(processed)
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          3980
        </td>
        <td>
          3749
          -
          7491
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          {
  val hasError: Boolean = WhileBusyBufferSubscriber.this.errorThrown.ne(null);
  &lt;synthetic&gt; &lt;artifact&gt; private[this] val x$1: (scala.collection.mutable.Queue[T], Int) = ({
    val buffer: scala.collection.mutable.Queue[T] = scala.collection.mutable.Queue.empty[T];
    var elem: T = WhileBusyBufferSubscriber.this.queue.poll();
    var count: Int = 0;
    while$1(){
      if (elem.!=(null))
        {
          {
            count = count.+(1);
            buffer.enqueue(elem);
            elem = WhileBusyBufferSubscriber.this.queue.poll()
          };
          while$1()
        }
      else
        ()
    };
    scala.Tuple2.apply[scala.collection.mutable.Queue[T], Int](buffer, count)
  }: (scala.collection.mutable.Queue[T], Int) @unchecked) match {
    case (_1: scala.collection.mutable.Queue[T], _2: Int)(scala.collection.mutable.Queue[T], Int)((next @ _), (processingNow @ _)) =&gt; scala.Tuple2.apply[scala.collection.mutable.Queue[T], Int](next, processingNow)
  };
  val next: scala.collection.mutable.Queue[T] = x$1._1;
  val processingNow: Int = x$1._2;
  if (next.nonEmpty)
    WhileBusyBufferSubscriber.this.downstream.onNext(next) match {
      case (sync @ _) if sync.isCompleted =&gt; sync match {
        case (continue @ _) if continue.==(monifu.reactive.Ack.Continue).||(continue.value.get.==(monifu.reactive.Ack.Continue.IsSuccess)) =&gt; WhileBusyBufferSubscriber.this.fastLoop(processed.+(processingNow))
        case (done @ _) if done.==(monifu.reactive.Ack.Cancel).||(done.value.get.==(monifu.reactive.Ack.Cancel.IsSuccess)) =&gt; {
          WhileBusyBufferSubscriber.this.downstreamIsDone = true;
          {
            WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
              WhileBusyBufferSubscriber.this.itemsToPush = 0;
              WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
            });
            ()
          }
        }
        case (error @ _) if error.value.get.isFailure =&gt; {
          WhileBusyBufferSubscriber.this.downstreamIsDone = true;
          try {
            WhileBusyBufferSubscriber.this.downstream.onError(error.value.get.failed.get)
          } finally {
            WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
              WhileBusyBufferSubscriber.this.itemsToPush = 0;
              WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
            });
            ()
          }
        }
      }
      case (async @ _) =&gt; async.onComplete[Any](((x0$1: scala.util.Try[monifu.reactive.Ack]) =&gt; x0$1 match {
        case monifu.reactive.Ack.Continue.IsSuccess =&gt; WhileBusyBufferSubscriber.this.rescheduled(processed.+(processingNow))
        case monifu.reactive.Ack.Cancel.IsSuccess =&gt; {
          WhileBusyBufferSubscriber.this.downstreamIsDone = true;
          WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
            WhileBusyBufferSubscriber.this.itemsToPush = 0;
            WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
          })
        }
        case (exception: Throwable)scala.util.Failure[monifu.reactive.Ack]((ex @ _)) =&gt; {
          WhileBusyBufferSubscriber.this.downstreamIsDone = true;
          try {
            WhileBusyBufferSubscriber.this.downstream.onError(ex)
          } finally {
            WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
              WhileBusyBufferSubscriber.this.itemsToPush = 0;
              WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
            });
            ()
          }
        }
        case (other @ _) =&gt; {
          WhileBusyBufferSubscriber.this.downstreamIsDone = true;
          try {
            WhileBusyBufferSubscriber.this.downstream.onError(new scala.MatchError(scala.StringContext.apply(&quot;&quot;, &quot;&quot;).s(other)))
          } finally {
            WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
              WhileBusyBufferSubscriber.this.itemsToPush = 0;
              WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
            });
            ()
          }
        }
      }))(WhileBusyBufferSubscriber.this.scheduler)
    }
  else
    if (WhileBusyBufferSubscriber.this.upstreamIsComplete.||(hasError))
      if (WhileBusyBufferSubscriber.this.queue.isEmpty.unary_!)
        WhileBusyBufferSubscriber.this.fastLoop(processed)
      else
        {
          WhileBusyBufferSubscriber.this.downstreamIsDone = true;
          try {
            if (WhileBusyBufferSubscriber.this.errorThrown.ne(null))
              WhileBusyBufferSubscriber.this.downstream.onError(WhileBusyBufferSubscriber.this.errorThrown)
            else
              WhileBusyBufferSubscriber.this.downstream.onComplete()
          } finally {
            WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
              WhileBusyBufferSubscriber.this.queue.clear();
              WhileBusyBufferSubscriber.this.itemsToPush = 0;
              WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
            });
            ()
          }
        }
    else
      {
        val remaining: Int = WhileBusyBufferSubscriber.this.lock.synchronized[Int]({
          WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.-(processed);
          if (WhileBusyBufferSubscriber.this.itemsToPush.&lt;=(0))
            WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Continue)
          else
            ();
          WhileBusyBufferSubscriber.this.itemsToPush
        });
        if (remaining.&gt;(0))
          WhileBusyBufferSubscriber.this.fastLoop(0)
        else
          ()
      }
}
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          3982
        </td>
        <td>
          3726
          -
          3726
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          3981
        </td>
        <td>
          3726
          -
          3726
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          127
        </td>
        <td>
          3879
        </td>
        <td>
          3730
          -
          3747
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.downstreamIsDone.unary_!
        </td>
      </tr><tr>
        <td>
          128
        </td>
        <td>
          3880
        </td>
        <td>
          3772
          -
          3791
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.ne
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.errorThrown.ne(null)
        </td>
      </tr><tr>
        <td>
          129
        </td>
        <td>
          3881
        </td>
        <td>
          3803
          -
          3803
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._1
        </td>
        <td style="background: #AEF1AE">
          x$1._1
        </td>
      </tr><tr>
        <td>
          129
        </td>
        <td>
          3882
        </td>
        <td>
          3809
          -
          3809
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Tuple2._2
        </td>
        <td style="background: #AEF1AE">
          x$1._2
        </td>
      </tr><tr>
        <td>
          143
        </td>
        <td>
          3883
        </td>
        <td>
          4097
          -
          4110
        </td>
        <td>
          Select
        </td>
        <td>
          scala.collection.TraversableOnce.nonEmpty
        </td>
        <td style="background: #AEF1AE">
          next.nonEmpty
        </td>
      </tr><tr>
        <td>
          144
        </td>
        <td>
          3884
        </td>
        <td>
          4120
          -
          4143
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.Observer.onNext
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.downstream.onNext(next)
        </td>
      </tr><tr>
        <td>
          144
        </td>
        <td>
          3942
        </td>
        <td>
          4120
          -
          6190
        </td>
        <td>
          Match
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.downstream.onNext(next) match {
  case (sync @ _) if sync.isCompleted =&gt; sync match {
    case (continue @ _) if continue.==(monifu.reactive.Ack.Continue).||(continue.value.get.==(monifu.reactive.Ack.Continue.IsSuccess)) =&gt; WhileBusyBufferSubscriber.this.fastLoop(processed.+(processingNow))
    case (done @ _) if done.==(monifu.reactive.Ack.Cancel).||(done.value.get.==(monifu.reactive.Ack.Cancel.IsSuccess)) =&gt; {
      WhileBusyBufferSubscriber.this.downstreamIsDone = true;
      {
        WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
          WhileBusyBufferSubscriber.this.itemsToPush = 0;
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
        });
        ()
      }
    }
    case (error @ _) if error.value.get.isFailure =&gt; {
      WhileBusyBufferSubscriber.this.downstreamIsDone = true;
      try {
        WhileBusyBufferSubscriber.this.downstream.onError(error.value.get.failed.get)
      } finally {
        WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
          WhileBusyBufferSubscriber.this.itemsToPush = 0;
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
        });
        ()
      }
    }
  }
  case (async @ _) =&gt; async.onComplete[Any](((x0$1: scala.util.Try[monifu.reactive.Ack]) =&gt; x0$1 match {
    case monifu.reactive.Ack.Continue.IsSuccess =&gt; WhileBusyBufferSubscriber.this.rescheduled(processed.+(processingNow))
    case monifu.reactive.Ack.Cancel.IsSuccess =&gt; {
      WhileBusyBufferSubscriber.this.downstreamIsDone = true;
      WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
        WhileBusyBufferSubscriber.this.itemsToPush = 0;
        WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
      })
    }
    case (exception: Throwable)scala.util.Failure[monifu.reactive.Ack]((ex @ _)) =&gt; {
      WhileBusyBufferSubscriber.this.downstreamIsDone = true;
      try {
        WhileBusyBufferSubscriber.this.downstream.onError(ex)
      } finally {
        WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
          WhileBusyBufferSubscriber.this.itemsToPush = 0;
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
        });
        ()
      }
    }
    case (other @ _) =&gt; {
      WhileBusyBufferSubscriber.this.downstreamIsDone = true;
      try {
        WhileBusyBufferSubscriber.this.downstream.onError(new scala.MatchError(scala.StringContext.apply(&quot;&quot;, &quot;&quot;).s(other)))
      } finally {
        WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
          WhileBusyBufferSubscriber.this.itemsToPush = 0;
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
        });
        ()
      }
    }
  }))(WhileBusyBufferSubscriber.this.scheduler)
}
        </td>
      </tr><tr>
        <td>
          145
        </td>
        <td>
          3885
        </td>
        <td>
          4175
          -
          4191
        </td>
        <td>
          Select
        </td>
        <td>
          scala.concurrent.Future.isCompleted
        </td>
        <td style="background: #AEF1AE">
          sync.isCompleted
        </td>
      </tr><tr>
        <td>
          147
        </td>
        <td>
          3887
        </td>
        <td>
          4297
          -
          4315
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Continue.IsSuccess
        </td>
        <td style="background: #AEF1AE">
          monifu.reactive.Ack.Continue.IsSuccess
        </td>
      </tr><tr>
        <td>
          147
        </td>
        <td>
          3886
        </td>
        <td>
          4263
          -
          4271
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Continue
        </td>
        <td style="background: #AEF1AE">
          monifu.reactive.Ack.Continue
        </td>
      </tr><tr>
        <td>
          147
        </td>
        <td>
          3889
        </td>
        <td>
          4251
          -
          4315
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.||
        </td>
        <td style="background: #AEF1AE">
          continue.==(monifu.reactive.Ack.Continue).||(continue.value.get.==(monifu.reactive.Ack.Continue.IsSuccess))
        </td>
      </tr><tr>
        <td>
          147
        </td>
        <td>
          3888
        </td>
        <td>
          4275
          -
          4315
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.==
        </td>
        <td style="background: #AEF1AE">
          continue.value.get.==(monifu.reactive.Ack.Continue.IsSuccess)
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          3890
        </td>
        <td>
          4376
          -
          4401
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td style="background: #AEF1AE">
          processed.+(processingNow)
        </td>
      </tr><tr>
        <td>
          149
        </td>
        <td>
          3891
        </td>
        <td>
          4367
          -
          4402
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.fastLoop
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.fastLoop(processed.+(processingNow))
        </td>
      </tr><tr>
        <td>
          151
        </td>
        <td>
          3893
        </td>
        <td>
          4467
          -
          4483
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Cancel.IsSuccess
        </td>
        <td style="background: #F0ADAD">
          monifu.reactive.Ack.Cancel.IsSuccess
        </td>
      </tr><tr>
        <td>
          151
        </td>
        <td>
          3895
        </td>
        <td>
          4431
          -
          4483
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.||
        </td>
        <td style="background: #F0ADAD">
          done.==(monifu.reactive.Ack.Cancel).||(done.value.get.==(monifu.reactive.Ack.Cancel.IsSuccess))
        </td>
      </tr><tr>
        <td>
          151
        </td>
        <td>
          3892
        </td>
        <td>
          4439
          -
          4445
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Cancel
        </td>
        <td style="background: #F0ADAD">
          monifu.reactive.Ack.Cancel
        </td>
      </tr><tr>
        <td>
          151
        </td>
        <td>
          3894
        </td>
        <td>
          4449
          -
          4483
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.==
        </td>
        <td style="background: #F0ADAD">
          done.value.get.==(monifu.reactive.Ack.Cancel.IsSuccess)
        </td>
      </tr><tr>
        <td>
          153
        </td>
        <td>
          3896
        </td>
        <td>
          4553
          -
          4557
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          true
        </td>
      </tr><tr>
        <td>
          154
        </td>
        <td>
          3901
        </td>
        <td>
          4592
          -
          4592
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          154
        </td>
        <td>
          3900
        </td>
        <td>
          4574
          -
          4694
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
  WhileBusyBufferSubscriber.this.itemsToPush = 0;
  WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
})
        </td>
      </tr><tr>
        <td>
          155
        </td>
        <td>
          3897
        </td>
        <td>
          4626
          -
          4627
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          0
        </td>
      </tr><tr>
        <td>
          156
        </td>
        <td>
          3899
        </td>
        <td>
          4646
          -
          4676
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.concurrent.Promise.success
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
        </td>
      </tr><tr>
        <td>
          156
        </td>
        <td>
          3898
        </td>
        <td>
          4669
          -
          4675
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Cancel
        </td>
        <td style="background: #F0ADAD">
          monifu.reactive.Ack.Cancel
        </td>
      </tr><tr>
        <td>
          159
        </td>
        <td>
          3902
        </td>
        <td>
          4724
          -
          4749
        </td>
        <td>
          Select
        </td>
        <td>
          scala.util.Try.isFailure
        </td>
        <td style="background: #F0ADAD">
          error.value.get.isFailure
        </td>
      </tr><tr>
        <td>
          161
        </td>
        <td>
          3903
        </td>
        <td>
          4819
          -
          4823
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          true
        </td>
      </tr><tr>
        <td>
          162
        </td>
        <td>
          3905
        </td>
        <td>
          4844
          -
          4890
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.Observer.onError
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.downstream.onError(error.value.get.failed.get)
        </td>
      </tr><tr>
        <td>
          162
        </td>
        <td>
          3904
        </td>
        <td>
          4863
          -
          4889
        </td>
        <td>
          Select
        </td>
        <td>
          scala.util.Try.get
        </td>
        <td style="background: #F0ADAD">
          error.value.get.failed.get
        </td>
      </tr><tr>
        <td>
          162
        </td>
        <td>
          3906
        </td>
        <td>
          4844
          -
          4890
        </td>
        <td>
          Block
        </td>
        <td>
          monifu.reactive.Observer.onError
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.downstream.onError(error.value.get.failed.get)
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          3911
        </td>
        <td>
          4935
          -
          4935
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          3910
        </td>
        <td>
          4917
          -
          5043
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
  WhileBusyBufferSubscriber.this.itemsToPush = 0;
  WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
})
        </td>
      </tr><tr>
        <td>
          163
        </td>
        <td>
          3912
        </td>
        <td>
          4917
          -
          5043
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
    WhileBusyBufferSubscriber.this.itemsToPush = 0;
    WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
  });
  ()
}
        </td>
      </tr><tr>
        <td>
          164
        </td>
        <td>
          3907
        </td>
        <td>
          4971
          -
          4972
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          0
        </td>
      </tr><tr>
        <td>
          165
        </td>
        <td>
          3908
        </td>
        <td>
          5016
          -
          5022
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Cancel
        </td>
        <td style="background: #F0ADAD">
          monifu.reactive.Ack.Cancel
        </td>
      </tr><tr>
        <td>
          165
        </td>
        <td>
          3909
        </td>
        <td>
          4993
          -
          5023
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.concurrent.Promise.success
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
        </td>
      </tr><tr>
        <td>
          170
        </td>
        <td>
          3941
        </td>
        <td>
          5095
          -
          6180
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          scala.concurrent.Future.onComplete
        </td>
        <td style="background: #AEF1AE">
          async.onComplete[Any](((x0$1: scala.util.Try[monifu.reactive.Ack]) =&gt; x0$1 match {
  case monifu.reactive.Ack.Continue.IsSuccess =&gt; WhileBusyBufferSubscriber.this.rescheduled(processed.+(processingNow))
  case monifu.reactive.Ack.Cancel.IsSuccess =&gt; {
    WhileBusyBufferSubscriber.this.downstreamIsDone = true;
    WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
      WhileBusyBufferSubscriber.this.itemsToPush = 0;
      WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
    })
  }
  case (exception: Throwable)scala.util.Failure[monifu.reactive.Ack]((ex @ _)) =&gt; {
    WhileBusyBufferSubscriber.this.downstreamIsDone = true;
    try {
      WhileBusyBufferSubscriber.this.downstream.onError(ex)
    } finally {
      WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
        WhileBusyBufferSubscriber.this.itemsToPush = 0;
        WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
      });
      ()
    }
  }
  case (other @ _) =&gt; {
    WhileBusyBufferSubscriber.this.downstreamIsDone = true;
    try {
      WhileBusyBufferSubscriber.this.downstream.onError(new scala.MatchError(scala.StringContext.apply(&quot;&quot;, &quot;&quot;).s(other)))
    } finally {
      WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
        WhileBusyBufferSubscriber.this.itemsToPush = 0;
        WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
      });
      ()
    }
  }
}))(WhileBusyBufferSubscriber.this.scheduler)
        </td>
      </tr><tr>
        <td>
          170
        </td>
        <td>
          3940
        </td>
        <td>
          5112
          -
          5112
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.scheduler
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.scheduler
        </td>
      </tr><tr>
        <td>
          173
        </td>
        <td>
          3914
        </td>
        <td>
          5224
          -
          5262
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.rescheduled
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.rescheduled(processed.+(processingNow))
        </td>
      </tr><tr>
        <td>
          173
        </td>
        <td>
          3913
        </td>
        <td>
          5236
          -
          5261
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.+
        </td>
        <td style="background: #AEF1AE">
          processed.+(processingNow)
        </td>
      </tr><tr>
        <td>
          177
        </td>
        <td>
          3915
        </td>
        <td>
          5369
          -
          5373
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          true
        </td>
      </tr><tr>
        <td>
          178
        </td>
        <td>
          3919
        </td>
        <td>
          5390
          -
          5510
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
  WhileBusyBufferSubscriber.this.itemsToPush = 0;
  WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
})
        </td>
      </tr><tr>
        <td>
          179
        </td>
        <td>
          3916
        </td>
        <td>
          5442
          -
          5443
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          0
        </td>
      </tr><tr>
        <td>
          180
        </td>
        <td>
          3917
        </td>
        <td>
          5485
          -
          5491
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Cancel
        </td>
        <td style="background: #F0ADAD">
          monifu.reactive.Ack.Cancel
        </td>
      </tr><tr>
        <td>
          180
        </td>
        <td>
          3918
        </td>
        <td>
          5462
          -
          5492
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.concurrent.Promise.success
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
        </td>
      </tr><tr>
        <td>
          185
        </td>
        <td>
          3920
        </td>
        <td>
          5612
          -
          5616
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          true
        </td>
      </tr><tr>
        <td>
          186
        </td>
        <td>
          3922
        </td>
        <td>
          5637
          -
          5659
        </td>
        <td>
          Block
        </td>
        <td>
          monifu.reactive.Observer.onError
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.downstream.onError(ex)
        </td>
      </tr><tr>
        <td>
          186
        </td>
        <td>
          3921
        </td>
        <td>
          5637
          -
          5659
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.Observer.onError
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.downstream.onError(ex)
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          3926
        </td>
        <td>
          5686
          -
          5812
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
  WhileBusyBufferSubscriber.this.itemsToPush = 0;
  WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
})
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          3928
        </td>
        <td>
          5686
          -
          5812
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
    WhileBusyBufferSubscriber.this.itemsToPush = 0;
    WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
  });
  ()
}
        </td>
      </tr><tr>
        <td>
          187
        </td>
        <td>
          3927
        </td>
        <td>
          5704
          -
          5704
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          188
        </td>
        <td>
          3923
        </td>
        <td>
          5740
          -
          5741
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          0
        </td>
      </tr><tr>
        <td>
          189
        </td>
        <td>
          3925
        </td>
        <td>
          5762
          -
          5792
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.concurrent.Promise.success
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
        </td>
      </tr><tr>
        <td>
          189
        </td>
        <td>
          3924
        </td>
        <td>
          5785
          -
          5791
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Cancel
        </td>
        <td style="background: #F0ADAD">
          monifu.reactive.Ack.Cancel
        </td>
      </tr><tr>
        <td>
          194
        </td>
        <td>
          3929
        </td>
        <td>
          5943
          -
          5947
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          true
        </td>
      </tr><tr>
        <td>
          195
        </td>
        <td>
          3932
        </td>
        <td>
          5968
          -
          6013
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.Observer.onError
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.downstream.onError(new scala.MatchError(scala.StringContext.apply(&quot;&quot;, &quot;&quot;).s(other)))
        </td>
      </tr><tr>
        <td>
          195
        </td>
        <td>
          3931
        </td>
        <td>
          5987
          -
          6012
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.MatchError.&lt;init&gt;
        </td>
        <td style="background: #F0ADAD">
          new scala.MatchError(scala.StringContext.apply(&quot;&quot;, &quot;&quot;).s(other))
        </td>
      </tr><tr>
        <td>
          195
        </td>
        <td>
          3930
        </td>
        <td>
          6002
          -
          6011
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.StringContext.s
        </td>
        <td style="background: #F0ADAD">
          scala.StringContext.apply(&quot;&quot;, &quot;&quot;).s(other)
        </td>
      </tr><tr>
        <td>
          195
        </td>
        <td>
          3933
        </td>
        <td>
          5968
          -
          6013
        </td>
        <td>
          Block
        </td>
        <td>
          monifu.reactive.Observer.onError
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.downstream.onError(new scala.MatchError(scala.StringContext.apply(&quot;&quot;, &quot;&quot;).s(other)))
        </td>
      </tr><tr>
        <td>
          196
        </td>
        <td>
          3938
        </td>
        <td>
          6058
          -
          6058
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          196
        </td>
        <td>
          3937
        </td>
        <td>
          6040
          -
          6166
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
  WhileBusyBufferSubscriber.this.itemsToPush = 0;
  WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
})
        </td>
      </tr><tr>
        <td>
          196
        </td>
        <td>
          3939
        </td>
        <td>
          6040
          -
          6166
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          {
  WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
    WhileBusyBufferSubscriber.this.itemsToPush = 0;
    WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
  });
  ()
}
        </td>
      </tr><tr>
        <td>
          197
        </td>
        <td>
          3934
        </td>
        <td>
          6094
          -
          6095
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          0
        </td>
      </tr><tr>
        <td>
          198
        </td>
        <td>
          3935
        </td>
        <td>
          6139
          -
          6145
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Cancel
        </td>
        <td style="background: #F0ADAD">
          monifu.reactive.Ack.Cancel
        </td>
      </tr><tr>
        <td>
          198
        </td>
        <td>
          3936
        </td>
        <td>
          6116
          -
          6146
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.concurrent.Promise.success
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          3943
        </td>
        <td>
          6206
          -
          6236
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Boolean.||
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.upstreamIsComplete.||(hasError)
        </td>
      </tr><tr>
        <td>
          202
        </td>
        <td>
          3979
        </td>
        <td>
          6202
          -
          7485
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          if (WhileBusyBufferSubscriber.this.upstreamIsComplete.||(hasError))
  if (WhileBusyBufferSubscriber.this.queue.isEmpty.unary_!)
    WhileBusyBufferSubscriber.this.fastLoop(processed)
  else
    {
      WhileBusyBufferSubscriber.this.downstreamIsDone = true;
      try {
        if (WhileBusyBufferSubscriber.this.errorThrown.ne(null))
          WhileBusyBufferSubscriber.this.downstream.onError(WhileBusyBufferSubscriber.this.errorThrown)
        else
          WhileBusyBufferSubscriber.this.downstream.onComplete()
      } finally {
        WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
          WhileBusyBufferSubscriber.this.queue.clear();
          WhileBusyBufferSubscriber.this.itemsToPush = 0;
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
        });
        ()
      }
    }
else
  {
    val remaining: Int = WhileBusyBufferSubscriber.this.lock.synchronized[Int]({
      WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.-(processed);
      if (WhileBusyBufferSubscriber.this.itemsToPush.&lt;=(0))
        WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Continue)
      else
        ();
      WhileBusyBufferSubscriber.this.itemsToPush
    });
    if (remaining.&gt;(0))
      WhileBusyBufferSubscriber.this.fastLoop(0)
    else
      ()
  }
        </td>
      </tr><tr>
        <td>
          206
        </td>
        <td>
          3944
        </td>
        <td>
          6575
          -
          6589
        </td>
        <td>
          Select
        </td>
        <td>
          scala.Boolean.unary_!
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.queue.isEmpty.unary_!
        </td>
      </tr><tr>
        <td>
          206
        </td>
        <td>
          3963
        </td>
        <td>
          6571
          -
          7063
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          if (WhileBusyBufferSubscriber.this.queue.isEmpty.unary_!)
  WhileBusyBufferSubscriber.this.fastLoop(processed)
else
  {
    WhileBusyBufferSubscriber.this.downstreamIsDone = true;
    try {
      if (WhileBusyBufferSubscriber.this.errorThrown.ne(null))
        WhileBusyBufferSubscriber.this.downstream.onError(WhileBusyBufferSubscriber.this.errorThrown)
      else
        WhileBusyBufferSubscriber.this.downstream.onComplete()
    } finally {
      WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
        WhileBusyBufferSubscriber.this.queue.clear();
        WhileBusyBufferSubscriber.this.itemsToPush = 0;
        WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
      });
      ()
    }
  }
        </td>
      </tr><tr>
        <td>
          207
        </td>
        <td>
          3946
        </td>
        <td>
          6603
          -
          6622
        </td>
        <td>
          Block
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.fastLoop
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.fastLoop(processed)
        </td>
      </tr><tr>
        <td>
          207
        </td>
        <td>
          3945
        </td>
        <td>
          6603
          -
          6622
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.fastLoop
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.fastLoop(processed)
        </td>
      </tr><tr>
        <td>
          209
        </td>
        <td>
          3962
        </td>
        <td>
          6661
          -
          7063
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          {
  WhileBusyBufferSubscriber.this.downstreamIsDone = true;
  try {
    if (WhileBusyBufferSubscriber.this.errorThrown.ne(null))
      WhileBusyBufferSubscriber.this.downstream.onError(WhileBusyBufferSubscriber.this.errorThrown)
    else
      WhileBusyBufferSubscriber.this.downstream.onComplete()
  } finally {
    WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
      WhileBusyBufferSubscriber.this.queue.clear();
      WhileBusyBufferSubscriber.this.itemsToPush = 0;
      WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
    });
    ()
  }
}
        </td>
      </tr><tr>
        <td>
          211
        </td>
        <td>
          3947
        </td>
        <td>
          6717
          -
          6721
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          true
        </td>
      </tr><tr>
        <td>
          213
        </td>
        <td>
          3954
        </td>
        <td>
          6750
          -
          6875
        </td>
        <td>
          If
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          if (WhileBusyBufferSubscriber.this.errorThrown.ne(null))
  WhileBusyBufferSubscriber.this.downstream.onError(WhileBusyBufferSubscriber.this.errorThrown)
else
  WhileBusyBufferSubscriber.this.downstream.onComplete()
        </td>
      </tr><tr>
        <td>
          213
        </td>
        <td>
          3948
        </td>
        <td>
          6754
          -
          6773
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.ne
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.errorThrown.ne(null)
        </td>
      </tr><tr>
        <td>
          214
        </td>
        <td>
          3950
        </td>
        <td>
          6789
          -
          6820
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.Observer.onError
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.downstream.onError(WhileBusyBufferSubscriber.this.errorThrown)
        </td>
      </tr><tr>
        <td>
          214
        </td>
        <td>
          3949
        </td>
        <td>
          6808
          -
          6819
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.errorThrown
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.errorThrown
        </td>
      </tr><tr>
        <td>
          214
        </td>
        <td>
          3951
        </td>
        <td>
          6789
          -
          6820
        </td>
        <td>
          Block
        </td>
        <td>
          monifu.reactive.Observer.onError
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.downstream.onError(WhileBusyBufferSubscriber.this.errorThrown)
        </td>
      </tr><tr>
        <td>
          216
        </td>
        <td>
          3953
        </td>
        <td>
          6852
          -
          6875
        </td>
        <td>
          Block
        </td>
        <td>
          monifu.reactive.Observer.onComplete
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.downstream.onComplete()
        </td>
      </tr><tr>
        <td>
          216
        </td>
        <td>
          3952
        </td>
        <td>
          6852
          -
          6875
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.Observer.onComplete
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.downstream.onComplete()
        </td>
      </tr><tr>
        <td>
          218
        </td>
        <td>
          3959
        </td>
        <td>
          6906
          -
          7053
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
  WhileBusyBufferSubscriber.this.queue.clear();
  WhileBusyBufferSubscriber.this.itemsToPush = 0;
  WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
})
        </td>
      </tr><tr>
        <td>
          218
        </td>
        <td>
          3961
        </td>
        <td>
          6906
          -
          7053
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          {
  WhileBusyBufferSubscriber.this.lock.synchronized[scala.concurrent.Promise[monifu.reactive.Ack]]({
    WhileBusyBufferSubscriber.this.queue.clear();
    WhileBusyBufferSubscriber.this.itemsToPush = 0;
    WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
  });
  ()
}
        </td>
      </tr><tr>
        <td>
          218
        </td>
        <td>
          3960
        </td>
        <td>
          6924
          -
          6924
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          219
        </td>
        <td>
          3955
        </td>
        <td>
          6938
          -
          6951
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.collection.mutable.ConcurrentQueue.clear
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.queue.clear()
        </td>
      </tr><tr>
        <td>
          220
        </td>
        <td>
          3956
        </td>
        <td>
          6997
          -
          6998
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          0
        </td>
      </tr><tr>
        <td>
          221
        </td>
        <td>
          3958
        </td>
        <td>
          7011
          -
          7041
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.concurrent.Promise.success
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Cancel)
        </td>
      </tr><tr>
        <td>
          221
        </td>
        <td>
          3957
        </td>
        <td>
          7034
          -
          7040
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Cancel
        </td>
        <td style="background: #AEF1AE">
          monifu.reactive.Ack.Cancel
        </td>
      </tr><tr>
        <td>
          225
        </td>
        <td>
          3978
        </td>
        <td>
          7083
          -
          7485
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          {
  val remaining: Int = WhileBusyBufferSubscriber.this.lock.synchronized[Int]({
    WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.-(processed);
    if (WhileBusyBufferSubscriber.this.itemsToPush.&lt;=(0))
      WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Continue)
    else
      ();
    WhileBusyBufferSubscriber.this.itemsToPush
  });
  if (remaining.&gt;(0))
    WhileBusyBufferSubscriber.this.fastLoop(0)
  else
    ()
}
        </td>
      </tr><tr>
        <td>
          226
        </td>
        <td>
          3972
        </td>
        <td>
          7109
          -
          7311
        </td>
        <td>
          Apply
        </td>
        <td>
          java.lang.Object.synchronized
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.lock.synchronized[Int]({
  WhileBusyBufferSubscriber.this.itemsToPush = WhileBusyBufferSubscriber.this.itemsToPush.-(processed);
  if (WhileBusyBufferSubscriber.this.itemsToPush.&lt;=(0))
    WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Continue)
  else
    ();
  WhileBusyBufferSubscriber.this.itemsToPush
})
        </td>
      </tr><tr>
        <td>
          227
        </td>
        <td>
          3964
        </td>
        <td>
          7139
          -
          7163
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.-
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.itemsToPush.-(processed)
        </td>
      </tr><tr>
        <td>
          228
        </td>
        <td>
          3970
        </td>
        <td>
          7174
          -
          7174
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          228
        </td>
        <td>
          3969
        </td>
        <td>
          7174
          -
          7174
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #F0ADAD">
          ()
        </td>
      </tr><tr>
        <td>
          228
        </td>
        <td>
          3965
        </td>
        <td>
          7178
          -
          7194
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&lt;=
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.itemsToPush.&lt;=(0)
        </td>
      </tr><tr>
        <td>
          229
        </td>
        <td>
          3968
        </td>
        <td>
          7247
          -
          7279
        </td>
        <td>
          Block
        </td>
        <td>
          scala.concurrent.Promise.success
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Continue)
        </td>
      </tr><tr>
        <td>
          229
        </td>
        <td>
          3967
        </td>
        <td>
          7247
          -
          7279
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.concurrent.Promise.success
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.nextAckPromise.success(monifu.reactive.Ack.Continue)
        </td>
      </tr><tr>
        <td>
          229
        </td>
        <td>
          3966
        </td>
        <td>
          7270
          -
          7278
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.Ack.Continue
        </td>
        <td style="background: #AEF1AE">
          monifu.reactive.Ack.Continue
        </td>
      </tr><tr>
        <td>
          230
        </td>
        <td>
          3971
        </td>
        <td>
          7290
          -
          7301
        </td>
        <td>
          Select
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.itemsToPush
        </td>
        <td style="background: #AEF1AE">
          WhileBusyBufferSubscriber.this.itemsToPush
        </td>
      </tr><tr>
        <td>
          235
        </td>
        <td>
          3977
        </td>
        <td>
          7447
          -
          7447
        </td>
        <td>
          Block
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          235
        </td>
        <td>
          3973
        </td>
        <td>
          7451
          -
          7464
        </td>
        <td>
          Apply
        </td>
        <td>
          scala.Int.&gt;
        </td>
        <td style="background: #AEF1AE">
          remaining.&gt;(0)
        </td>
      </tr><tr>
        <td>
          235
        </td>
        <td>
          3976
        </td>
        <td>
          7447
          -
          7447
        </td>
        <td>
          Literal
        </td>
        <td>
          &lt;nosymbol&gt;
        </td>
        <td style="background: #AEF1AE">
          ()
        </td>
      </tr><tr>
        <td>
          235
        </td>
        <td>
          3975
        </td>
        <td>
          7466
          -
          7477
        </td>
        <td>
          Block
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.fastLoop
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.fastLoop(0)
        </td>
      </tr><tr>
        <td>
          235
        </td>
        <td>
          3974
        </td>
        <td>
          7466
          -
          7477
        </td>
        <td>
          Apply
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.fastLoop
        </td>
        <td style="background: #F0ADAD">
          WhileBusyBufferSubscriber.this.fastLoop(0)
        </td>
      </tr><tr>
        <td>
          248
        </td>
        <td>
          3983
        </td>
        <td>
          7719
          -
          7775
        </td>
        <td>
          ApplyToImplicitArgs
        </td>
        <td>
          monifu.reactive.observers.WhileBusyBufferSubscriber.&lt;init&gt;
        </td>
        <td style="background: #AEF1AE">
          new monifu.reactive.observers.WhileBusyBufferSubscriber[T](downstream, bufferSize)(s)
        </td>
      </tr>
    </table>
          </div>
        </div>
      </body>
    </html>